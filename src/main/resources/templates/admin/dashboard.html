<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>ë¶ë§¤ë‹ˆì €</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    @keyframes fade {
      0% {
        opacity: 0.4;
      }
      100% {
        opacity: 1;
      }
    }

    header{position: relative;}
    header>.bg_lnb{
			display: none;
			position: absolute;
			left: 0;
			top: 72px;
			width: 100%;
			height: 120px;
      background-color: rgba(59, 130, 246, 0.06); 
      border-top: 3px solid #3b82f6; 
      border-bottom: 1px solid #bfdbfe;
			animation: fade 0.3s;
    }

    .container{
			position: relative;
    }
    .container>nav{
				position: absolute;
				right: 0;
				top: 32px;
    }

    .container>nav .lnb{
      display: none;
      margin-top: 32px;
      animation: fade 0.3s;
    }
    .container>nav .lnb>li>a{
      display: block;
      height: 30px;
      line-height: 30px;
      
    }
    .container>nav .lnb>li>a:hover{
      color: #fff;
      font-weight: 800;    
      background-color: #3b82f6;
    }


  </style>
  <script src="/Global/js/GlobalNavBarHover.js" defer></script>
</head>
<body class="bg-gray-50">
  <!-- í—¤ë” -->
  <header th:replace="~{fragments/header :: siteHeader}"></header>

  <!-- ë³¸ë¬¸ -->
  <main class="max-w-screen-xl mx-auto px-4 py-8">
    <h2 class="text-2xl font-bold mb-6">ğŸ“Š ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h2>
    <div class="grid grid-cols-3 gap-6">
      <!-- ëŒ€ì—¬í˜„í™© -->
      <div class="bg-white rounded shadow p-4">
        <h3 class="font-semibold text-lg mb-2">ğŸ“š ëŒ€ì—¬í˜„í™©</h3>
        <ul class="text-sm space-y-1">
          <li>ì˜¤ëŠ˜ì˜ ëŒ€ì—¬í˜„í™©: <span>0</span>ê±´</li>
          <li>ì´ ëŒ€ì—¬ì¤‘ì¸ ë„ì„œ ê¶Œìˆ˜: <span>0</span>ê¶Œ</li>
          <li>ë¯¸ë‚© ë„ì„œ ê¶Œìˆ˜: <span>0</span>ê¶Œ</li>
        </ul>
      </div>

      <!-- í¬ë§ë„ì„œ -->
      <div class="bg-white rounded shadow p-4">
        <h3 class="font-semibold text-lg mb-2">ğŸ“– í¬ë§ë„ì„œ</h3>
        <ul class="text-sm space-y-1">
          <li>ì‹ ì²­ëœ ë„ì„œ ê¶Œìˆ˜: <span>0</span>ê¶Œ</li>
          <li>ì²˜ë¦¬ëŒ€ê¸° ê±´ìˆ˜: <span>0</span>ê±´</li>
        </ul>
      </div>

      <!-- ë„ì„œê´€ë¦¬ -->
      <div class="bg-white rounded shadow p-4">
        <h3 class="font-semibold text-lg mb-2">ğŸ“— ë„ì„œê´€ë¦¬</h3>
        <ul class="text-sm space-y-1">
          <li>ì´ ë„ì„œ ìˆ˜: <span>0</span>ê¶Œ</li>
          <li>ì‹ ê·œ ë“±ë¡ ìš”ì²­: <span>0</span>ê±´</li>
        </ul>
      </div>

      <!-- íšŒì›ê´€ë¦¬ -->
      <div class="bg-white rounded shadow p-4">
        <h3 class="font-semibold text-lg mb-2">ğŸ‘¤ íšŒì›ê´€ë¦¬</h3>
        <ul class="text-sm space-y-1">
          <li>ì˜¤ëŠ˜ ê°€ì… íšŒì› ìˆ˜: <span id="todayNewUserCount">0</span>ëª…</li>
          <li>ì „ì²´ íšŒì› ìˆ˜: <span id="totalUserCount">0</span>ëª…</li>
          <li>íƒˆí‡´ íšŒì› ìˆ˜: <span id="totalWithdrawUserCount">0</span>ëª…</li>
        </ul>
      </div>

      <!-- ê´€ë¦¬ì -->
      <div class="bg-white rounded shadow p-4">
        <h3 class="font-semibold text-lg mb-2">ğŸ” ê´€ë¦¬ì</h3>
        <ul class="text-sm space-y-1">
          <li>ë“±ë¡ëœ ê´€ë¦¬ì ìˆ˜: <span id="adminCount">0</span>ëª…</li>
        </ul>
      </div>

      <!-- ê²Œì‹œíŒ -->
      <div class="bg-white rounded shadow p-4">
        <h3 class="font-semibold text-lg mb-2">ğŸ“¬ ê²Œì‹œíŒ</h3>
        <ul class="text-sm space-y-1">
          <li>ë„ì„œë¬¸ì˜: <span>0</span>ê±´</li>
          <li>ì˜¤ë¥˜ì‹ ê³ : <span>0</span>ê±´</li>
        </ul>
      </div>
    </div>
  </main>

  <!-- í‘¸í„° -->
  <footer class="bg-white border-t mt-12">
    <div class="max-w-screen-xl mx-auto px-4 py-6 text-center text-sm text-gray-500">
      ìƒí˜¸: ë¶ë§¤ë‹ˆì € | ì „í™”: 010-7294-3724 | ì´ë©”ì¼: admin@bookmanager.com
    </div>
  </footer>


  <script>

    if (true) {
      const $gnb = document.querySelector('header .gnb');
      const $lnbs = document.querySelectorAll('header .lnb');
      const $bg_lnb = document.querySelector('.bg_lnb');

      const navFadeIn = function () {
        $bg_lnb.style.display = 'block';

        $lnbs.forEach(function ($lnb) {
          $lnb.style.display = 'block';
        });
      };

      const navFadeOut = function () {
        $bg_lnb.style.display = 'none';

        $lnbs.forEach(function ($lnb) {
          $lnb.style.display = 'none';
        });
      };

      $gnb.addEventListener('mouseenter', function () {
        navFadeIn();
      });

      $gnb.addEventListener('mouseleave', function () {
        navFadeOut();
      });

      $bg_lnb.addEventListener('mouseover', function () {
        navFadeIn();
      });

      $bg_lnb.addEventListener('mouseout', function () {
        navFadeOut();
      });
    }

  </script>
  <script>
    // í˜ì´ì§€ ë¡œë“œ í›„ ì‹¤í–‰
    window.addEventListener('DOMContentLoaded', async () => {
      try {
        const response = await fetch('/admin/api/dashboard');
        if (!response.ok) throw new Error('ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜');

        const data = await response.json();

        document.getElementById('todayRentCount').textContent = data.todayRentCount;
        document.getElementById('totalRentCount').textContent = data.totalRentCount;
        document.getElementById('overdueBookCount').textContent = data.overdueBookCount;

        // ë‹¤ë¥¸ ìš”ì†Œë“¤ë„ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ê°±ì‹ 
      } catch (error) {
        console.error('ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
      }
    });
  </script>
</body>
</html>
